let simulateClick=e=>{console.log("simulateClick called on",e);let t=new Event("click",{bubbles:!0,cancelable:!0});e.dispatchEvent(t)},lastScrollY=window.scrollY,nativeScrollListener=()=>{let e=window.scrollY,t=Math.abs(e-lastScrollY);if(t>20||t<20){let i=document.querySelector('[data-quickview="trigger"].active');console.log("Before simulateClick on Scroll, active class present:",i&&i.classList.contains("active")),simulateClick(i)}lastScrollY=e},attachConditionalListeners=()=>{let e=e=>{if("Escape"===e.key){let t=document.querySelector('[data-quickview="trigger"].active');console.log("Before simulateClick on Escape, active class present:",t&&t.classList.contains("active")),simulateClick(t)}};return document.addEventListener("keydown",e),document.addEventListener("scroll",nativeScrollListener),()=>{document.removeEventListener("keydown",e),document.removeEventListener("scroll",nativeScrollListener)}};document.addEventListener("DOMContentLoaded",function(){let e;document.querySelectorAll('[data-quickview="trigger"]').forEach(t=>{t.addEventListener("click",function(i){i.preventDefault(),console.log("Trigger clicked",this),t.classList.add("active");let l=document.body.classList.contains("quickview"),c=this.closest('[data-quickview="item"]').querySelector('[data-quickview="link"]').getAttribute("href"),s=document.querySelector("[data-quickview-nav]").querySelector(".cta_link");if(l)console.log("Closing quickview"),document.body.classList.remove("quickview"),t.classList.remove("active"),e&&e();else{console.log("Opening quickview");let a=this.getBoundingClientRect().top,o=window.pageYOffset||document.documentElement.scrollTop,n=window.innerHeight/4;s.href=c,lenis.scrollTo(Math.round(o+a-n),{duration:.6,lock:!0,force:!0,onComplete(){document.body.classList.add("quickview"),setTimeout(()=>{lastScrollY=window.scrollY,e=attachConditionalListeners()},100)}})}})});let t=document.querySelector(".qv-close");t&&t.addEventListener("click",function(){if(document.body.classList.contains("quickview")){let e=document.querySelector('[data-quickview="trigger"].active');console.log("Before simulateClick on Close icon, active class present:",e&&e.classList.contains("active")),simulateClick(e)}})});
