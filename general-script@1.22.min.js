"scrollRestoration"in history&&(history.scrollRestoration="manual"),document.addEventListener("DOMContentLoaded",function(){window.scrollTo(0,0)}),window.onbeforeunload=function(){window.scrollTo(0,0)},gsap.config({nullTargetWarn:!1});const initNavStateToggle=()=>{let e=document.querySelectorAll("[data-nav-toggle]");if(e.length>0){let t=()=>{let e=document.querySelector(".navbar_wrap");if(e){let t="true"===e.getAttribute("fullscreen");e.setAttribute("fullscreen",!t)}};e.forEach(e=>{gsap.to(e,{scrollTrigger:{trigger:e,start:"top top+=5%",onEnter:t,onLeaveBack:t}})})}},initNav=()=>{let e=document.querySelector(".menu_wrap"),t=document.querySelector(".navbar_wrap"),o=e.querySelectorAll(".line"),a=e.querySelectorAll("[data-menu-fade]"),r=e.querySelectorAll("[data-menu-low]"),n,l,i=e.querySelectorAll(".h-h2"),s=t.querySelector(".img.is-white"),d="dark"===t.getAttribute("mode"),c="true"===t.getAttribute("fullscreen"),u=window.innerWidth<480,$=!1;function p(e,t){let o=[];for(let a=0;a<e.length;a+=t)o.push(Array.from(e).slice(a,a+t));return o}let m=p(o,5);gsap.set(i,{y:"100%"}),gsap.set(".lines-wrapper.is-menu",{y:"110%"}),gsap.set(a,{opacity:0,y:"50%"}),gsap.set(r,{opacity:0,y:"50%"});let g=gsap.timeline({defaults:{ease:"expo.out",duration:.5}}),y=()=>{$=!0,g.clear(),g.progress(0);let t=gsap.timeline();l="efefeb",m.forEach((e,o)=>{t.to(e,{y:"0vh",duration:.8,ease:"power4.out",stagger:{amount:.1,from:"random"}},.15*o)}),g.set(e,{display:"block"}).to(o,{y:"0vh",ease:"power4.out",duration:.8,stagger:{amount:.6,from:"start"},onStart(){m.forEach(e=>{e.forEach(e=>{gsap.set(e,{y:`${gsap.utils.random(100,125)}vh`})})})}}).to(".page",{scale:.92,duration:1},0).to(".nav_trigger",{height:"3.2rem",x:u?"2.2vw":"0rem",duration:.5,ease:"power2.inout"},0).to(".nav_line.is-top",{rotateZ:45,y:"0.18rem"},.1).to(".nav_line.is-bottom",{rotateZ:-45,y:"-0.2rem"},.1).to(i,{y:"0%",stagger:.05,duration:1},"<+=0.4").to(a,{y:"0%",opacity:1,stagger:.05,duration:.6},"<").to(r,{y:"0%",opacity:.6,stagger:.05,delay:.05,duration:.6,clearProps:"opacity"},"<").to(".navbar_inner",{background:d?"#000":"transparent",color:"#efefeb"},"<-=0.1").to(s,{opacity:1,duration:.3},"<").to(".nav_trigger",{height:"3.2rem",duration:.2},"<").to(".lines-wrapper.is-menu",{y:"0%",duration:1},"<+=0.2")},v=()=>{$=!1,g.clear(),g.progress(0);let t;t=d?"#181618":"efefeb",g.to(o,{y:"100vh",duration:.5,overwrite:!0,ease:"equalizerOut",stagger:{amount:.1,from:"random"}},0).to(".page",{scale:1,duration:1.2},0).to(".navbar_inner",{borderColor:l,background:n,clearProps:"all"},0).to(".nav_trigger",{height:"2.4rem",x:u?"0vw":"0rem",duration:.5,ease:"power2.inout"},0).to(".nav_line.is-top",{rotateZ:0,y:"0rem"},.1).to(".nav_line.is-bottom",{rotateZ:0,y:"0rem"},.1).to(i,{y:"100%",duration:.6,stagger:.02},0).to([a,r],{y:"50%",opacity:0,stagger:{each:.05,from:"end"},duration:.6},0).to(s,{opacity:d?1:0,duration:.3},"<").to(".nav_trigger",{borderColor:d?"#efefeb":c?"efefeb":"#181618",duration:.2},0).to(".nav_line",{background:d?"#efefeb":c?"#efefeb":"181618"},0).to(".lines-wrapper.is-menu",{y:"110%",duration:.8},0).set(e,{display:"none"})};document.querySelector(".nav_trigger").addEventListener("click",()=>{if($)c="true"===t.getAttribute("fullscreen"),v(),t.classList.remove("open");else{let e=document.querySelector(".navbar_inner");n=getComputedStyle(e).backgroundColor,l=getComputedStyle(e).borderColor,t.classList.add("open"),y()}})},initMarquees=()=>{function e(){new SplitType("[data-split-text]",{types:"words, chars"})}e();let t=gsap.timeline({repeat:-1,paused:!0,onComplete(){gsap.set(".marquee-panel",{xPercent:0})}});t.to(".marquee-panel",{xPercent:-100,duration:40,ease:"none"}),gsap.utils.toArray(".marquee").forEach((e,o)=>{let a=e.querySelectorAll(".marquee-bg__panel"),r=e.querySelectorAll(".char");ScrollTrigger.create({trigger:e,start:"top bottom",end:"bottom top",onEnter:()=>t.play(),onEnterBack:()=>t.play()});let n=gsap.timeline({paused:!0,defaults:{ease:"expo.out",duration:1.5},onStart:()=>t.play()});n.to(a,{scale:1.05,x:0,overwrite:!0,stagger:{each:.01}}).to(".marquee-bg",{scale:1,x:"0%"},0).fromTo(r,{x:"300%",opacity:1},{x:"0%",opacity:1,duration:1,stagger:{each:.05}},0),ScrollTrigger.create({trigger:e,start:"top 85%",markers:!1,onEnter:()=>n.play()})})},initFooterLinkHover=()=>{let e=document.querySelectorAll(".ft_map-link"),t=(t,o)=>{e.forEach(e=>{e!==t&&(e.style.opacity=o)})};e.forEach(e=>{e.addEventListener("mouseenter",()=>t(e,.3)),e.addEventListener("mouseleave",()=>t(e,1))})};function startAnimation(e){e.querySelectorAll("[data-sound-line]").forEach(e=>{e._isAnimating=!0,animateSoundLine(e)})}function stopAnimation(e){e.querySelectorAll("[data-sound-line]").forEach(e=>{e._isAnimating=!1,gsap.killTweensOf(e)})}const animateSoundLine=e=>{let t=parseFloat(e.getAttribute("data-min-duration")),o=parseFloat(e.getAttribute("data-max-duration")),a=parseFloat(e.getAttribute("data-min-distance")),r=parseFloat(e.getAttribute("data-max-distance")),n=Math.random()*(o-t)+t,l=Math.random()*(r-a)+a;gsap.to(e,{x:`${l}%`,duration:n,ease:"power3.inOut",onComplete(){requestAnimationFrame(()=>animateSoundLine(e))}})};document.querySelectorAll("[data-sound-line]").forEach(e=>{e.closest(".lines-wrapper.is-work")||animateSoundLine(e)});const initGlobalFunctions=()=>{initNav(),initNavStateToggle(),initMarquees()},initDesktopFunctions=()=>{initFooterLinkHover()},initAll=()=>{initGlobalFunctions(),window.innerWidth>=480?initDesktopFunctions():window.addEventListener("resize",()=>{window.innerWidth>=480&&initDesktopFunctions()})};function addModalEventListeners(){document.addEventListener("keydown",handleModalEscape),lenis.on("scroll",handleModalScroll),document.addEventListener("click",handleModalClick)}function removeModalEventListeners(){document.removeEventListener("keydown",handleModalEscape),lenis.off("scroll",handleModalScroll),document.removeEventListener("click",handleModalClick)}function handleModalEscape(e){"Escape"===e.key&&(plModalTimeline.timeScale(1.4).reverse(),removeModalEventListeners())}function handleModalScroll(){plModalTimeline.timeScale(1.4).reverse(),removeModalEventListeners()}function handleModalClick(e){plModal.contains(e.target)||(plModalTimeline.timeScale(1.4).reverse(),removeModalEventListeners())}const plModal=document.querySelector(".pl_modal"),plModalTimeline=gsap.timeline({paused:!0,reversed:!0,onComplete(){addModalEventListeners()},onReverseComplete(){gsap.set(plModal,{display:"none"}),removeModalEventListeners()}});function plToggle(){plModalTimeline.reversed()?plModalTimeline.timeScale(1).play():plModalTimeline.timeScale(1.4).reverse()}function updateMixtapeCount(){let e=JSON.parse(localStorage.getItem("bioMap")||"{}"),t=JSON.parse(localStorage.getItem("videoMap")||"{}"),o=JSON.parse(localStorage.getItem("soundtrackMap")||"{}"),a=Object.keys(o).length+Object.keys(t).length+Object.keys(e).length,r=document.querySelectorAll("[data-pl-count]");r.forEach(e=>{e.textContent=a})}plModalTimeline.set(plModal,{display:"flex"}).fromTo(plModal,{opacity:0,yPercent:-10},{opacity:1,yPercent:0,duration:.6,ease:"expo.out"}),document.querySelector(".pl_icon.is--toggle").addEventListener("click",plToggle),updateMixtapeCount();
