document.addEventListener("DOMContentLoaded",()=>{let e=window.innerWidth;function t(){let e=document.querySelectorAll('script[src*="player.vimeo.com/api/player.js"]'),t=new Set;e.forEach(e=>{t.has(e.src)?e.parentNode.removeChild(e):t.add(e.src)})}let r=Array.from(document.querySelectorAll(".plyr__video-embed")),l=new Map;r.forEach(e=>{let t=new Plyr(e,{controls:["play","progress","current-time","mute","fullscreen"]});l.set(e,t)}),window.plyrInstancesMap=l;let o=()=>{let e=5,t=null;function r(t){if(window<=479)return;let r=t.currentTarget,o=r.querySelector(".bd_item-info"),a=r.querySelector(".hover-preview__img"),i=r.querySelector(".vid-wrap"),u=r.querySelector(".plyr.plyr--full-ui.plyr--video.plyr--vimeo"),s=l.get(u);e++;let c=gsap.timeline({defaults:{ease:"expo.out",duration:.8}});c.to(r,{scaleX:1.4,scaleY:1.15,zIndex:e}).to(o,{scaleX:.714,scaleY:.869},0).to(i,{scaleX:1,scaleY:1.15},0).to(a,{autoAlpha:0,scaleX:1,duration:.4,onStart(){s.muted=!0,s.volume=0,s.play()}},0)}function o(e){let t=e.currentTarget,r=t.querySelector(".bd_item-info"),o=t.querySelector(".hover-preview__img"),a=t.querySelector(".vid-wrap"),i=t.querySelector(".plyr.plyr--full-ui.plyr--video.plyr--vimeo"),u=l.get(i),s=gsap.timeline({defaults:{ease:"expo.out",duration:.8}});s.to([t,r,a],{scaleX:1,scaleY:1,onStart(){u.pause(),u.volume=1}}).to(o,{scaleX:1.2,autoAlpha:1,duration:.2,overwrite:!0},0)}gsap.timeline({defaults:{ease:"expo.out",duration:.8},onComplete:()=>t=null}),document.querySelectorAll("[data-hover-scale]").forEach(e=>{e.addEventListener("mouseenter",r),e.addEventListener("mouseleave",o)});let a=gsap.utils.toArray('[data-preview="full-bleed"]');a.forEach((e,t)=>{let r=e.querySelector('[data-preview="img"]'),o=e.querySelector('[data-preview="icon"]'),a=e.querySelector('[data-preview="gradient"]'),i=e.querySelector(".plyr.plyr--full-ui.plyr--video.plyr--vimeo"),u=l.get(i);e.addEventListener("mouseenter",()=>{let e=gsap.timeline({paused:!0,defaults:{ease:"power3.inOut",duration:.6}});e.to(a,{opacity:0}).fromTo(o,{scale:0,rotate:-90},{scale:1,rotate:0,ease:"expo.out"},0).to(r,{opacity:0,ease:"ease",onStart(){u.muted=!0,u.volume=0,u.play()}},0),e.play()}),e.addEventListener("mouseleave",()=>{let e=gsap.timeline({paused:!0,defaults:{ease:"power3.inOut",duration:.6,overwrite:!0}});e.to(a,{opacity:1}).to(o,{scale:0,rotate:-90,ease:"expo.out"},0).to(r,{opacity:1,ease:"ease",duration:.2,onComplete(){u.pause(),u.currentTime=0,u.volume=1}},0),e.play()})})},a=()=>{let e=document.querySelectorAll(".three-col_item");e.length>0&&(e[0].classList.add("is--active"),e.forEach(e=>{e.addEventListener("mouseenter",()=>{let t=e.querySelector(".bg-img"),r=e.querySelector(".plyr.plyr--full-ui.plyr--video.plyr--vimeo"),o=l.get(r);o&&(o.muted=!0,o.volume=0,o.play()),gsap.to(t,{opacity:0,duration:.2,delay:.7}),document.querySelectorAll(".three-col_item").forEach(e=>{e.classList.remove("is--active")}),e.classList.add("is--active")}),e.addEventListener("mouseleave",()=>{let t=e.querySelector(".plyr.plyr--full-ui.plyr--video.plyr--vimeo"),r=l.get(t),o=e.querySelector(".bg-img");r&&!r.paused&&r.pause(),gsap.to(o,{opacity:1,duration:.1,overwrite:!0})})}))};e>=480&&(o(),a())});
